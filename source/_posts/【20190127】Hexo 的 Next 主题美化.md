---
title: 【Hexo】Hexo 的 NexT 主题美化
date: 2020-01-28 10:20:20
updated: 2020-01-28 16:16:16
tags:
---

<!-- more -->

## 1.NexT 主题的下载与安装

- 下载 [NexT](https://github.com/theme-next/hexo-theme-next/releases) 主题并将其解压到博客的 themes 目录下，修改名称为 next；
- 修改博客根目录下的 _config.yml，将 theme 项设置为 next;

## 2.修改主题样式

编辑 next 主题目录下的 _config.yml 文件，打开相应 schema 的注释，细节如下。

```yaml
# ---------------------------------------------------------------
# Scheme Settings
# ---------------------------------------------------------------

# Schemes
#scheme: Muse
#scheme: Mist
#scheme: Pisces
scheme: Gemini
```

## 3.设置主题为中文

编辑博客根目录下的 _config.yml 文件，修改 language 项，细节如下。

```yaml
language: zh-CN
```

## 4.设置博客头像

编辑 next 主题目录下的 _config.yml 文件，具体设置如下。

```yaml
avatar:
  # 头像图片
  url: /images/gakki.png
  # 头像为圆形
  rounded: true
  # 鼠标移动到头像时，头像旋转
  rotated: true
```

## 5.更改博客标题、作者名

编辑博客根目录下的 _config.yml 文件，具体设置如下。

```yaml
title: Leo's Blog #标题
subtitle: '坐标杭州，卖马为生' #子标题
author: Leo #作者信息
```

## 6.添加动态背景

启用 three 背景的方式如下：

```yaml
# 1.进入 next 主题目录
cd blog/themes/next

# 2.拉取 three 背景依赖
git clone https://github.com/theme-next/theme-next-three source/lib/three

# 3.编辑 next 主题目录下的 _config.yml 文件
three:
  enable: true
  three_waves: true
  canvas_lines: false
  canvas_sphere: false
```

启用 canvas-nest 背景的方式如下：

```yaml
# 1.进入 next 主题目录
cd blog/themes/next

# 2.拉取 canvas-next 背景依赖
git clone https://github.com/theme-next/theme-next-canvas-nest source/lib/canvas-nest

# 3.编辑 next 主题目录下的 _config.yml 文件
canvas_nest:
  enable: true
  onmobile: true # Display on mobile or not
  color: "0,0,255" # RGB values, use `,` to separate
  opacity: 0.5 # The opacity of line: 0~1
  zIndex: -1 # z-index property of the background
  count: 99 # The number of lines
```

启用 canvas-ribbon 背景的方式如下：

```yaml
# 1.进入 next 主题目录
cd blog/themes/next

# 2.拉取 canvas-ribbon 背景依赖
git clone https://github.com/theme-next/theme-next-canvas-ribbon source/lib/canvas-ribbon

# 3.编辑 next 主题目录下的 _config.yml 文件
canvas_ribbon:
  enable: true
  size: 300 # The width of the ribbon
  alpha: 0.6 # The transparency of the ribbon
  zIndex: -1 # The display level of the ribbon
```

> 提示1：要删除 clone 下来的依赖包中的 .git 文件夹
>
> 提示2：如果下载的依赖无法提交到 github，则可能是由 next 目录下的 .gitignore 引起的

## 7.设置加载效果

```yaml
# 1.进入 next 主题目录
cd blog/themes/next

# 2.拉取 three 背景依赖
git clone https://github.com/theme-next/theme-next-pace source/lib/pace

# 3.编辑 next 主题目录下的 _config.yml 文件
pace:
  enable: true
  # Themes list:
  # big-counter | bounce | barber-shop | center-atom 
  # center-circle | center-radar | center-simple
  # corner-indicator | fill-left | flat-top | flash 
  # loading-bar | mac-osx | material | minimal
  theme: center-atom
```

## 8.设置点击特效

首先在 themes/next/source/js/src 里面建一个叫 fireworks.js 的文件，代码如下：

```javascript
"use strict";function updateCoords(e){pointerX=(e.clientX||e.touches[0].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[0].clientY-canvasEl.getBoundingClientRect().top}function setParticuleDirection(e){var t=anime.random(0,360)*Math.PI/180,a=anime.random(50,180),n=[-1,1][anime.random(0,1)]*a;return{x:e.x+n*Math.cos(t),y:e.y+n*Math.sin(t)}}function createParticule(e,t){var a={};return a.x=e,a.y=t,a.color=colors[anime.random(0,colors.length-1)],a.radius=anime.random(16,32),a.endPos=setParticuleDirection(a),a.draw=function(){ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.fillStyle=a.color,ctx.fill()},a}function createCircle(e,t){var a={};return a.x=e,a.y=t,a.color="#F00",a.radius=0.1,a.alpha=0.5,a.lineWidth=6,a.draw=function(){ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=1},a}function renderParticule(e){for(var t=0;t<e.animatables.length;t++){e.animatables[t].target.draw()}}function animateParticules(e,t){for(var a=createCircle(e,t),n=[],i=0;i<numberOfParticules;i++){n.push(createParticule(e,t))}anime.timeline().add({targets:n,x:function(e){return e.endPos.x},y:function(e){return e.endPos.y},radius:0.1,duration:anime.random(1200,1800),easing:"easeOutExpo",update:renderParticule}).add({targets:a,radius:anime.random(80,160),lineWidth:0,alpha:{value:0,easing:"linear",duration:anime.random(600,800)},duration:anime.random(1200,1800),easing:"easeOutExpo",update:renderParticule,offset:0})}function debounce(e,t){var a;return function(){var n=this,i=arguments;clearTimeout(a),a=setTimeout(function(){e.apply(n,i)},t)}}var canvasEl=document.querySelector(".fireworks");if(canvasEl){var ctx=canvasEl.getContext("2d"),numberOfParticules=30,pointerX=0,pointerY=0,tap="mousedown",colors=["#FF1461","#18FF92","#5A87FF","#FBF38C"],setCanvasSize=debounce(function(){canvasEl.width=2*window.innerWidth,canvasEl.height=2*window.innerHeight,canvasEl.style.width=window.innerWidth+"px",canvasEl.style.height=window.innerHeight+"px",canvasEl.getContext("2d").scale(2,2)},500),render=anime({duration:1/0,update:function(){ctx.clearRect(0,0,canvasEl.width,canvasEl.height)}});document.addEventListener(tap,function(e){"sidebar"!==e.target.id&&"toggle-sidebar"!==e.target.id&&"A"!==e.target.nodeName&&"IMG"!==e.target.nodeName&&(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))},!1),setCanvasSize(),window.addEventListener("resize",setCanvasSize,!1)}"use strict";function updateCoords(e){pointerX=(e.clientX||e.touches[0].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[0].clientY-canvasEl.getBoundingClientRect().top}function setParticuleDirection(e){var t=anime.random(0,360)*Math.PI/180,a=anime.random(50,180),n=[-1,1][anime.random(0,1)]*a;return{x:e.x+n*Math.cos(t),y:e.y+n*Math.sin(t)}}function createParticule(e,t){var a={};return a.x=e,a.y=t,a.color=colors[anime.random(0,colors.length-1)],a.radius=anime.random(16,32),a.endPos=setParticuleDirection(a),a.draw=function(){ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.fillStyle=a.color,ctx.fill()},a}function createCircle(e,t){var a={};return a.x=e,a.y=t,a.color="#F00",a.radius=0.1,a.alpha=0.5,a.lineWidth=6,a.draw=function(){ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=1},a}function renderParticule(e){for(var t=0;t<e.animatables.length;t++){e.animatables[t].target.draw()}}function animateParticules(e,t){for(var a=createCircle(e,t),n=[],i=0;i<numberOfParticules;i++){n.push(createParticule(e,t))}anime.timeline().add({targets:n,x:function(e){return e.endPos.x},y:function(e){return e.endPos.y},radius:0.1,duration:anime.random(1200,1800),easing:"easeOutExpo",update:renderParticule}).add({targets:a,radius:anime.random(80,160),lineWidth:0,alpha:{value:0,easing:"linear",duration:anime.random(600,800)},duration:anime.random(1200,1800),easing:"easeOutExpo",update:renderParticule,offset:0})}function debounce(e,t){var a;return function(){var n=this,i=arguments;clearTimeout(a),a=setTimeout(function(){e.apply(n,i)},t)}}var canvasEl=document.querySelector(".fireworks");if(canvasEl){var ctx=canvasEl.getContext("2d"),numberOfParticules=30,pointerX=0,pointerY=0,tap="mousedown",colors=["#FF1461","#18FF92","#5A87FF","#FBF38C"],setCanvasSize=debounce(function(){canvasEl.width=2*window.innerWidth,canvasEl.height=2*window.innerHeight,canvasEl.style.width=window.innerWidth+"px",canvasEl.style.height=window.innerHeight+"px",canvasEl.getContext("2d").scale(2,2)},500),render=anime({duration:1/0,update:function(){ctx.clearRect(0,0,canvasEl.width,canvasEl.height)}});document.addEventListener(tap,function(e){"sidebar"!==e.target.id&&"toggle-sidebar"!==e.target.id&&"A"!==e.target.nodeName&&"IMG"!==e.target.nodeName&&(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))},!1),setCanvasSize(),window.addEventListener("resize",setCanvasSize,!1)};
```

打开 themes/next/layout/_layout.swig ,在 </body> 标签上方添加如下代码：

```html
{% if theme.fireworks %}
   <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
   <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
   <script type="text/javascript" src="/js/src/fireworks.js"></script>
{% endif %}
```

打开 themes/next/_config.yml，在文件末尾添加如下代码：

```yaml
# Fireworks
fireworks: true
```



## 参考

https://theme-next.org/

http://theme-next.iissnan.com/

https://www.bilibili.com/video/av17653359